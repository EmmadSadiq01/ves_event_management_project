<!-- <?php

// $server =  "localhost";
// $username = "root";
// $password = "";
// $database = "ves_mhs";

// $connection = mysqli_connect($server, $username, $password, $database);


// if ($_SERVER['REQUEST_METHOD'] == 'POST') {

//   $query = "INSERT INTO inquery";
//   $result = mysqli_query($query, $connection);
// }

?> -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="evo-calendar.min.css" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="evo-calendar.midnight-blue.min.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/v5.10.0/css/duotone.css"
      integrity="sha384-R3QzTxyukP03CMqKFe0ssp5wUvBPEyy9ZspCB+Y01fEjhMwcXixTyeot+S40+AjZ"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/v5.10.0/css/fontawesome.css"
      integrity="sha384-eHoocPgXsiuZh+Yy6+7DsKAerLXyJmu2Hadh4QYyt+8v86geixVYwFqUvMU8X90l"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <section class="calendar">
      <div class="my_row">
        <div class="calendar_section">
          <div id="calendar" class="sidebar-hide"></div>
        </div>
        <div class="bookings_section">
          <div class="bookings">
            <div class="booking_container">
              <div class="booking_header">
                <h3>Booking Info:</h3>
                <p id="booking_event_date"></p>
              </div>
              <!-- <div class="booking-empty">
                <p>No event for today.. so take a rest! :)</p>
              </div> -->
              <div id="booking_view">
                <div
                  class="event-container"
                  role="button"
                  data-event-index="19"
                >
                  <!-- <div class="event-icon">
                  <div
                    class="event-bullet-19"
                    style="background-color: red"
                  ></div>
                </div>
                <div class="event-info">
                  <p class="event-title">valima</p>
                  <p class="event-desc">
                    Hall: a<br />Cost: 200000<br />Conact:0303003030
                  </p>
                  <button
                    type="button"
                    class="btn btn-success"
                    id="19"
                    onclick="editEvent(this.id)"
                  >
                    Edit
                  </button>
                  <button
                    type="button"
                    class="btn btn-warning"
                    id="19"
                    onclick="deleteEvent(this.id)"
                  >
                    Delete
                  </button>
                </div> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>


<!-- Modal -->
<div class="modal fade" id="addTargetModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="addTarget" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Add Target</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form>
      <div class="modal-body">

        <div class="input-group   mb-3">
          <span class="input-group-text">Today Date</span>
          <input type="date" id="todayDate" class="form-control">
          <input type="hidden" id="hallId" class="form-control">
          <input type="hidden" id="ownerid" class="form-control">
        </div>
        <div class="input-group mb-3">
          <span class="input-group-text">Target Date</span>
          <input type="date" id="targetDate" class="form-control">
        </div>
        <div class="input-group  mb-3">
          <span class="input-group-text">Target Price</span>
          <input type="number" id="targetPrice" class="form-control">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="addTargetHandler()">Submit</button>
      </div>
    </form>
    </div>
  </div>
</div>


    <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
      crossorigin="anonymous"
    ></script>

    <script src="evo-calendar.js"></script>
    <script>
      let eventdate = "";
      let myEvents = [];
      let pushEnvents = {};
      let newEnvents = [];
      let after_split = "";
      let calendarEvents = [];

      // $(document).ready(function() {
      let url = "http://localhost/API_Inquery/api-fetch-all.php";
      fetch(url)
        .then((res) => res.json())
        .then((out) => {
          var monthsArray = new Array();
          monthsArray[0] = "January";
          monthsArray[1] = "February";
          monthsArray[2] = "march";
          monthsArray[3] = "April";
          monthsArray[4] = "May";
          monthsArray[5] = "June";
          monthsArray[6] = "July";
          monthsArray[7] = "August";
          monthsArray[8] = "September";
          monthsArray[9] = "October";
          monthsArray[10] = "November";
          monthsArray[11] = "December";
          for (let i = 0; i < out.length; i++) {
            eventdate = out[i].inquery_date;
            // console.log(eventdate)
            changeFormat = eventdate.split("-");
            let year = changeFormat[0];
            // let getMonth = new Date(eventdate).getMonth();
            let month = changeFormat[1] - 1;
            let date = changeFormat[2];
            // console.log(month)
            // let more_split_date = date.split(" ");
            after_split = monthsArray[month] + "/" + date + "/" + year;
            // console.log("in then", after_split);

            pushEnvents = {
              id: out[i].iquery_id,
              name: out[i].event_name,
              date: after_split,
              type: out[i].iquery_id,
              description:
                "Hall: " +
                out[i].hallportion +
                "</br>Cost: " +
                out[i].estimated_cost +
                "</br>Conact:" +
                out[i].personContact,
              everyYear: false,
              color: "red",
            };
            myEvents.push(pushEnvents);
          }
          // console.log(newEnvents);
          // myEvents = [
          //   {
          //     id: "1", // Event's ID (required)
          //     name: "Emmad Function", // Event name (required)
          //     date: after_split, // Event date (required)
          //     type: "A", // Event type (required)
          //     description:
          //       "Hall: A </br>Cost: 25,000 </br>Guest: 300 </br>Conact: 03412725048 ",
          //     everyYear: false, // Same event every year (optional)
          //     color: "red",
          //   }
          // ];
          $("#calendar").evoCalendar({
            theme: "Royal Navy",
            // settingName: settingValue
            calendarEvents: myEvents,
          });
          // console.log(out)
        })
        // .then(() => {
        //
        // })
        .catch((err) => {
          throw err;
        });
      // let calendarEvents = [];
      // myEvents = [
      //   {
      //     id: "1", // Event's ID (required)
      //     name: "Emmad Function", // Event name (required)
      //     date: after_split, // Event date (required)
      //     type: "A", // Event type (required)
      //     description:
      //       "Hall: A </br>Cost: 25,000 </br>Guest: 300 </br>Conact: 03412725048 ",
      //     everyYear: false, // Same event every year (optional)
      //     color: "red",
      //   },
      //   {
      //     id: "2", // Event's ID (required)
      //     name: "Hasnain Function", // Event name (required)
      //     date: "march/01/2021", // Event date (required)
      //     type: "B", // Event type (required)
      //     description:
      //       "Hall: B </br>Cost: 57,000 </br>Guest: 300 </br>Conact: 03412725048 ",
      //     everyYear: false, // Same event every year (optional)
      //     color: "blue",
      //   },
      // ];
      // $("#calendar").evoCalendar({
      //   theme: "Midnight Blue",
      //   // settingName: settingValue
      //   calendarEvents: myEvents,
      // });
      // console.log($("#calendar").evoCalendar())

      // console.log(myEvents[0].name);
      // });
      // console.log(myEvents);
      // console.log("format date =>", after_split);

    </script>
  </body>
</html>
